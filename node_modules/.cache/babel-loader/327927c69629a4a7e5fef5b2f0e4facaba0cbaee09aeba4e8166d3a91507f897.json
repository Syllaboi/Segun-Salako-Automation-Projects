{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{Mic,MicOff,Send}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const VoiceRecorder=_ref=>{let{onTranscription,isProcessing}=_ref;const[isRecording,setIsRecording]=useState(false);const[mediaRecorder,setMediaRecorder]=useState(null);const[audioChunks,setAudioChunks]=useState([]);const[isListening,setIsListening]=useState(false);const recognitionRef=useRef(null);useEffect(()=>{// Initialize Speech Recognition if available\nif('webkitSpeechRecognition'in window||'SpeechRecognition'in window){const SpeechRecognition=window.webkitSpeechRecognition||window.SpeechRecognition;recognitionRef.current=new SpeechRecognition();recognitionRef.current.continuous=true;recognitionRef.current.interimResults=true;recognitionRef.current.lang='en-US';recognitionRef.current.onresult=event=>{const transcript=Array.from(event.results).map(result=>result[0]).map(result=>result.transcript).join('');if(event.results[event.results.length-1].isFinal){onTranscription(transcript);setIsListening(false);}};recognitionRef.current.onerror=event=>{console.error('Speech recognition error:',event.error);setIsListening(false);};recognitionRef.current.onend=()=>{setIsListening(false);};}return()=>{if(recognitionRef.current){recognitionRef.current.stop();}};},[onTranscription]);const startRecording=async()=>{try{// Start speech recognition if available\nif(recognitionRef.current&&!isListening){recognitionRef.current.start();setIsListening(true);return;}// Fallback to media recorder for audio recording\nconst stream=await navigator.mediaDevices.getUserMedia({audio:true});const recorder=new MediaRecorder(stream);recorder.ondataavailable=event=>{if(event.data.size>0){setAudioChunks(prev=>[...prev,event.data]);}};recorder.onstop=()=>{const audioBlob=new Blob(audioChunks,{type:'audio/wav'});// Here you would typically send the audio to a transcription service\n// For now, we'll just show a placeholder message\nonTranscription(\"Audio recorded - transcription would happen here\");setAudioChunks([]);};recorder.start();setMediaRecorder(recorder);setIsRecording(true);}catch(error){console.error('Error starting recording:',error);}};const stopRecording=()=>{if(recognitionRef.current&&isListening){recognitionRef.current.stop();setIsListening(false);return;}if(mediaRecorder&&isRecording){mediaRecorder.stop();mediaRecorder.stream.getTracks().forEach(track=>track.stop());setIsRecording(false);setMediaRecorder(null);}};const toggleRecording=()=>{if(isRecording||isListening){stopRecording();}else{startRecording();}};const isActive=isRecording||isListening;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleRecording,disabled:isProcessing,className:\"\\n          mic-button w-16 h-16 rounded-full flex items-center justify-center\\n          transition-all duration-300 ease-out\\n          \".concat(isActive?'bg-red-500 animate-recording neon-glow':'bg-blue-neon hover:bg-blue-dark neon-glow',\"\\n          \").concat(isProcessing?'opacity-50 cursor-not-allowed':'hover:scale-110',\"\\n          focus:outline-none focus:ring-4 focus:ring-blue-neon focus:ring-opacity-30\\n        \"),children:isActive?/*#__PURE__*/_jsx(MicOff,{className:\"w-6 h-6 text-white\"}):/*#__PURE__*/_jsx(Mic,{className:\"w-6 h-6 text-dark-primary\"})}),isActive&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 text-sm text-dark-muted animate-pulse\",children:isListening?'Listening...':'Recording...'})]});};export default VoiceRecorder;","map":{"version":3,"names":["React","useState","useRef","useEffect","Mic","MicOff","Send","jsx","_jsx","jsxs","_jsxs","VoiceRecorder","_ref","onTranscription","isProcessing","isRecording","setIsRecording","mediaRecorder","setMediaRecorder","audioChunks","setAudioChunks","isListening","setIsListening","recognitionRef","window","SpeechRecognition","webkitSpeechRecognition","current","continuous","interimResults","lang","onresult","event","transcript","Array","from","results","map","result","join","length","isFinal","onerror","console","error","onend","stop","startRecording","start","stream","navigator","mediaDevices","getUserMedia","audio","recorder","MediaRecorder","ondataavailable","data","size","prev","onstop","audioBlob","Blob","type","stopRecording","getTracks","forEach","track","toggleRecording","isActive","className","children","onClick","disabled","concat"],"sources":["/workspace/src/components/VoiceRecorder.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Mic, MicOff, Send } from 'lucide-react';\n\nconst VoiceRecorder = ({ onTranscription, isProcessing }) => {\n  const [isRecording, setIsRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState(null);\n  const [audioChunks, setAudioChunks] = useState([]);\n  const [isListening, setIsListening] = useState(false);\n  const recognitionRef = useRef(null);\n\n  useEffect(() => {\n    // Initialize Speech Recognition if available\n    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {\n      const SpeechRecognition = window.webkitSpeechRecognition || window.SpeechRecognition;\n      recognitionRef.current = new SpeechRecognition();\n      recognitionRef.current.continuous = true;\n      recognitionRef.current.interimResults = true;\n      recognitionRef.current.lang = 'en-US';\n\n      recognitionRef.current.onresult = (event) => {\n        const transcript = Array.from(event.results)\n          .map(result => result[0])\n          .map(result => result.transcript)\n          .join('');\n\n        if (event.results[event.results.length - 1].isFinal) {\n          onTranscription(transcript);\n          setIsListening(false);\n        }\n      };\n\n      recognitionRef.current.onerror = (event) => {\n        console.error('Speech recognition error:', event.error);\n        setIsListening(false);\n      };\n\n      recognitionRef.current.onend = () => {\n        setIsListening(false);\n      };\n    }\n\n    return () => {\n      if (recognitionRef.current) {\n        recognitionRef.current.stop();\n      }\n    };\n  }, [onTranscription]);\n\n  const startRecording = async () => {\n    try {\n      // Start speech recognition if available\n      if (recognitionRef.current && !isListening) {\n        recognitionRef.current.start();\n        setIsListening(true);\n        return;\n      }\n\n      // Fallback to media recorder for audio recording\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const recorder = new MediaRecorder(stream);\n      \n      recorder.ondataavailable = (event) => {\n        if (event.data.size > 0) {\n          setAudioChunks(prev => [...prev, event.data]);\n        }\n      };\n\n      recorder.onstop = () => {\n        const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });\n        // Here you would typically send the audio to a transcription service\n        // For now, we'll just show a placeholder message\n        onTranscription(\"Audio recorded - transcription would happen here\");\n        setAudioChunks([]);\n      };\n\n      recorder.start();\n      setMediaRecorder(recorder);\n      setIsRecording(true);\n    } catch (error) {\n      console.error('Error starting recording:', error);\n    }\n  };\n\n  const stopRecording = () => {\n    if (recognitionRef.current && isListening) {\n      recognitionRef.current.stop();\n      setIsListening(false);\n      return;\n    }\n\n    if (mediaRecorder && isRecording) {\n      mediaRecorder.stop();\n      mediaRecorder.stream.getTracks().forEach(track => track.stop());\n      setIsRecording(false);\n      setMediaRecorder(null);\n    }\n  };\n\n  const toggleRecording = () => {\n    if (isRecording || isListening) {\n      stopRecording();\n    } else {\n      startRecording();\n    }\n  };\n\n  const isActive = isRecording || isListening;\n\n  return (\n    <div className=\"flex items-center justify-center p-4\">\n      <button\n        onClick={toggleRecording}\n        disabled={isProcessing}\n        className={`\n          mic-button w-16 h-16 rounded-full flex items-center justify-center\n          transition-all duration-300 ease-out\n          ${isActive \n            ? 'bg-red-500 animate-recording neon-glow' \n            : 'bg-blue-neon hover:bg-blue-dark neon-glow'\n          }\n          ${isProcessing ? 'opacity-50 cursor-not-allowed' : 'hover:scale-110'}\n          focus:outline-none focus:ring-4 focus:ring-blue-neon focus:ring-opacity-30\n        `}\n      >\n        {isActive ? (\n          <MicOff className=\"w-6 h-6 text-white\" />\n        ) : (\n          <Mic className=\"w-6 h-6 text-dark-primary\" />\n        )}\n      </button>\n      \n      {isActive && (\n        <div className=\"ml-4 text-sm text-dark-muted animate-pulse\">\n          {isListening ? 'Listening...' : 'Recording...'}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default VoiceRecorder;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}